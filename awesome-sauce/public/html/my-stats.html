<!DOCTYPE html>
<html lang="en">
<html id="html">


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Fortnite Companion</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
    <link rel="stylesheet" type="text/css" href="../styles/styles.css">
</head>

<body id="body-store-tracker">
    <nav>
        <div class="nav-extended">
            <ul class="center hide-on-down">
                <a href="index.html"> <img src="../resources/fornite image.png" alt="fortnite companion logo" id="logo"></a>
                <ul class="tabs tabs-transparent">
                    <li class="tab"><a href="friendfinder.html">Friend Finder</a></li>
                    <li class="tab"><a href="store-tracker.html">Store Tracker</a></li>
                    <li class="tab"><a href="challenges.html">Challenges</a></li>
                    <li class="tab"><a href="items.html">My Items</a></li>
                    <li class="tab"><a href="my-stats.html">My Stats</a></li>
                    <div class="login-div">
                        <li id="welcome"></li>
                        <li><a class="waves-effect waves-light btn modal-trigger" id="login1" href="#modal1">Login</a></li>
                        <li><a class="waves-effect waves-light btn hide" id="btnlogout">Log out</a></li>
                    </div>
                </ul>
            </ul>
        </div>
    </nav>

    <div class="container">
        <div class="none-for-now">
            <div id="modal1" class="modal">
                <div class="modal-content">
                    <div class="row">
                        <div class="row z-depth-6 card-panel">
                            <form class="login-form">
                                <h3>Account Login</h3>
                                <div class="row">
                                    <div class="input-field col s12">
                                        <i class="material-icons prefix">mail_outline</i>
                                        <input class="validate" id="email" type="email">
                                        <label for="email" data-error="wrong" data-success="right">Email</label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="input-field col s12">
                                        <i class="material-icons prefix">lock_outline</i>
                                        <input id="password" type="password">
                                        <label for="password">Password</label>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <div class="row">
                                <div class="center-align">
                                    <a href="#" class="btn waves-effect waves-light modal-action modal-close" id="btnlogin">Login
                                        <i class="material-icons right">vpn_key</i>
                                    </a>
                                    <a href="#" class="btn waves-effect waves-light modal-action modal-close" id="btnsignup">Sign
                                        Up
                                        <i class="material-icons right">account_circle</i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="space"></div>
            <div class="container">
                <p id="demo"></p>
                <div class="row">
                    <form class="col s12">
                        <div class="row">
                            <div class="input-field col s6">
                                <input placeholder="Placeholder" id="userid" type="text" class="validate" name="userid">
                                <label for="first_name">User Name</label>
                            </div>

                            <div class="input-field col s6">
                                <input placeholder="Placeholder" id="kills" type="text" class="validate" name="kills"
                                    readonly>
                                <label for="first_name">Kills</label>
                            </div>

                        </div>

                        <div class="row">

                        </div>

                        <div class="row">
                            <div class="input-field col s6">
                                <input placeholder="Placeholder" id="wins" type="text" class="validate" name="wins">
                                <label for="first_name">Wins</label>
                            </div>
                            <div class="input-field col s6">
                                <input placeholder="Placeholder" id="matches_played" type="text" class="validate" name="matches_played"
                                    readonly>
                                <label for="first_name">Matches Played</label>
                            </div>

                        </div>
                        <div class="row">
                            <div class="input-field col s6">
                                <input placeholder="Placeholder" id="kd" type="text" class="validate" name="kd">
                                <label for="first_name">kd</label>
                            </div>
                            <div class="input-field col s6">
                                <input placeholder="Placeholder" id="score_solo" type="text" class="validate" name="score_solo"
                                    readonly>
                                <label for="first_name">Score</label>
                            </div>

                        </div>
                        <div class="row">
                            <button class="btn waves-effect waves-light" type="submit" name="action" id="stat">Submit
                                <!-- <i class="material-icons right">send</i> -->
                            </button>
                            <button class="btn waves-effect waves-light" type="submit" name="action" id="save">Save
                                <!-- <i class="material-icons right">send</i> -->
                            </button>

                        </div>
                        <label>Browser Select</label>
                        <select class="browser-default">
                            <option value="" disabled selected>Choose your Platform</option>
                            <option value="pc">PC</option>
                            <option value="ps4">PS4</option>
                            <option value="3">Xbox</option>
                            <option value="4">Nintendo Switch</option>
                            <option value="5">Mobile</option>
                        </select>
                    </form>
                </div>
                <div class="row">
                    <span class="todo-container">
                    </span>
                </div>
                <div style="height:400px;width:750px;">
                    <canvas id="myChart"></canvas>
                </div>


            </div>
</body>
<script>
    var i = 0;
    var txt = 'Fornite Companion.';
    var speed = 50;
    var user_id;
    var killStats = [];


    function typeWriter() {
        if (i < txt.length) {
            document.getElementById("demo").innerHTML += txt.charAt(i);
            i++;
            setTimeout(typeWriter, speed);
        }
    }
    //typeWriter()


    $("#stat").on('click', function (e) {
        //delucanolan
        e.preventDefault();
        var username = $("#userid").val().trim();
        var queryURL = "https://fortnite-public-api.theapinetwork.com/prod09/users/id?username=" + username;
        var html = "";
        $.ajax({
            url: queryURL,
            method: "GET"
        }).then(function (response) {
            console.log(response.uid)
            console.log(response.platforms[1])
            //$("#userid").val(response.uid);
            user_id = response.uid;
            setTimeout(showstats, 3);
            for (i = 0; i < response.platforms.length; i++) {
                $(".browser-default").append('<option>' + response.platforms[i] + '</option>');
                console.log($(".browser-default").val());
            }
        });
    })




    function showstats() {
        var queryURL = "https://fortnite-public-api.theapinetwork.com/prod09/users/public/br_stats?user_id=" +
            user_id + "&platform=ps4";
        var html = "";
        $.ajax({
            url: queryURL,
            method: "GET"
        }).then(function (response) {
            console.log(response)
            //  console.log(response.platforms[1])


            $("#kills").val(response.totals.kills);
            $("#wins").val(response.totals.wins);
            $("#matches_played").val(response.totals.matchesplayed);
            $("#kd").val(response.totals.kd);
            $("#score_solo").val(response.stats.score_solo);
            killStats.push(response.stats.kills_solo, response.stats.kills_duo, response.stats.kills_squad)

            //#######            CHART
            var ctx = document.getElementById('myChart').getContext('2d');
            var chart = new Chart(ctx, {
                // The type of chart we want to create
                type: 'line',

                // The data for our dataset
                data: {
                    labels: ["Solo Kills", "Duo Kills", "Kill Squad"],
                    datasets: [{
                        label: "Kills",
                        backgroundColor: 'rgb(255, 99, 132)',
                        borderColor: 'rgb(255, 99, 132)',
                        data: killStats,
                    }]
                },

                // Configuration options go here
                options: {}
            });

            //CHART END

        });

    }
</script>
<!-- Custom Script -->
<script src="js/viewtest.js" type="text/javascript"></script>
<script src="https://www.gstatic.com/firebasejs/5.7.3/firebase.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<script src="../js/logic.js"></script>
</html>







<script>
    //   for(i=0;i<50;i++){
    //   console.log(response[i].name);
    // console.log(response[i].description);
    //console.log(response[i].cost);
    //console.log(response[i].type);
    //  html += '<tr><td width="20%">'+response[i].name+'</td><td width="20%">'+response[i].description+'</td><td width="10%">'+response[i].cost+'</td><td class="positive">'+response[i].type+'</td><td><img height="42" width="42" src='+response[i].images.transparent+'></td></tr>'
    // $(".response").html(html);
    //}
</script>